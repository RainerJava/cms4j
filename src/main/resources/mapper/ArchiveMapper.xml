<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Archive">
    <resultMap id="archiveDetailMap" type="Archive">
        <id property="id" column="id"/>
        <result property="title" column="title"/>
        <result property="article_count" column="image_url"/>
        <result property="lastModifiedDate" column="last_modified_date"/>
        <result property="createdDate" column="created_date"/>
    </resultMap>

    <sql id="archiveColumns">id, title, article_count, created_date, last_modified_date</sql>

    <!--
        获取Archive
    -->
    <select id="getArchive" parameterType="int" resultMap="archiveDetailMap">
        select <include refid="archiveColumns"/>
        from cms_archive
        where id=#{id}
        order by id DESC
        limit 1
	</select>

    <!--
        获取Archive
    -->
    <select id="getArchiveByTitle" parameterType="String" resultMap="archiveDetailMap">
        select <include refid="archiveColumns"/>
        from cms_archive
        where title=#{title}
        order by id DESC
        limit 1
	</select>

    <!--
        获取Archive
    -->
    <select id="getAllArchive" resultMap="archiveDetailMap">
        select <include refid="archiveColumns"/>
        from cms_archive
        order by id DESC
	</select>

    <!--
         获取Top 10
     -->
    <select id="getTopTenArchive" resultMap="archiveDetailMap">
        SELECT <include refid="archiveColumns"/>
        FROM cms_archive
        ORDER BY id DESC
        LIMIT 10
	</select>

    <!--
         查询图片
     -->
    <select id="searchArchive" parameterType="map" resultMap="archiveDetailMap">
        select <include refid="archiveColumns"/>
        from cms_archive
        <where>
            <if test="title != null">
                title=#{title}
            </if>
        </where>
        order by ${Sort} ${Direction}
    </select>
</mapper>